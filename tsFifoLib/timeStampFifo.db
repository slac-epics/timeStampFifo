#
# timeStampFifo.db
#

#
# TimeStampFifo Process 
# This aSub PV handles updating the timeStampFifo driver w/ new values
#
# Inputs
#	A: Port name
#	B: Event Code
#	C: Generation count
#	D: Expected delay in fiducials from event code to acquisition
#
# Outputs
#	A:	TimeStamp Synced Status: 0 = unlocked, 1 = locked
#
record( aSub, "$(DEV):ProcessSub" )
{
  field( DESC, "Update TSS data" )
  field( SCAN, "Passive" )
  field( INAM, "TSFifo_Init" )
  field( SNAM, "TSFifo_Process" )
  field( FTA,  "STRING" ) field( INPA, "$(PORT)" )
  field( FTB,  "LONG"   ) field( INPB, "$(EC)      CPP MS" )
  field( FTC,  "LONG"   ) field( INPC, "$(GEN)     CPP MS" )
  field( FTD,  "LONG"   ) field( INPD, "$(FID_DLY) CPP MS" )

  field( OUTA, "$(DEV):SyncStatus PP MS" )
  field( FTVA, "LONG"   )
  info(  autosaveFields, "DESC" )
}


record( bo, "$(DEV):SyncStatus" )
{
  field( DESC, "TSS sync status" )
  field( ZNAM, "Unlocked" )
  field( ONAM, "Locked" )
  field( ZSV,  "MAJOR" )
  field( OSV,  "NO_ALARM" )
  info(  autosaveFields, "DESC ZNAM ONAM ZSV OSV" )
}

